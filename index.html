<!doctype html>
<html>
<head>
  <title>Timetable-Software</title>
	<meta charset="utf-8">
	<meta name="theme-color" content="#fff">
  <meta name="description" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="./css/main.css" />
  <link rel="manifest" id="manifest">
</head>
<body>
  <header>
    <h1 id="timetable"></h1>
  </header>
  <article>
    <section id="loading_screen">
      <div id="loading_content">
        <div class="balls">
          <div></div><div></div><div></div><div></div>
        </div>
        <p class="grey">Loading</p>
        <noscript><p style="color:#e00">Please enable JavaScript</p></noscript>
      </div>
    </section>
    <section id="table"><table>
      <tr>
        <th></th>
        <th id="monday"></th>
        <th id="tuesday"></th>
        <th id="wednesday"></th>
        <th id="thursday"></th>
        <th id="friday"></th>
      </tr>
    </table></section>

    <section id="edit_section">
      <h2 id="subjects"></h2>
      <button id="add_subject" onclick="addSubject()"></button>
      <button id="add_lesson" onclick="addLesson()"></button>
      <p id="drag_and_drop" class="grey"></p>
      <span id="new"></span>

      <h2 id="deleting"></h2>
      <section id="delete" ondrop="drop(event)" ondragover="allowDrop(event)"></section>
      <button id="empty_trash" onclick="emptyTrash()"></button>
      <button id="delete_all_subjects" onclick="deleteAllSubjects()"></button>
      <button id="delete_all_additional_lessons" onclick="deleteAllAdditionalLessons()"></button>

      <h2 id="editing"></h2>
      <section id="edit" ondrop="drop(event)" ondragover="allowDrop(event)"></section>
      <button id="change_name" onclick="changeName()"></button>
      <button id="change_color" onclick="changeColor()"></button>

      <h2 id="saving_and_loading"></h2>
      <button id="save" onClick="save()"></button>
      <label id="load_label" class="input-file"></label>

      <h2 id="printing"></h2>
      <button id="print_timetable" onclick="window.print()"></button>
      <p id="printing_color_warning" class="grey"></p>

      <h2 id="language"></h2>
      <button id="english" onClick="setLanguage('en')"></button>
      <button id="german" onClick="setLanguage('de')"></button>

      <p id="copyright" class="grey"></p>
    </section>
    
    <p id="created_with"></p>
  </article>
  <script>
    let newWorker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('/Timetable-Software/sw.js').then(function(registration) {
           registration.addEventListener('updatefound', () => {
            newWorker = registration.installing;
            newWorker.addEventListener('statechange', () => {
              if (newWorker.state == 'installed' && navigator.serviceWorker.controller) {
                newWorker.postMessage({ action: 'skipWaiting' });
              }
            });
          });
          console.log('ServiceWorker registration successful with scope: ', registration.scope);
        }, function(err) {
          console.log('ServiceWorker registration failed: ', err);
        });
      });

      let refreshing;
      navigator.serviceWorker.addEventListener('controllerchange', function () {
        if (refreshing) return;
        window.location.reload();
        refreshing = true;
      });
    }
  </script>
  <script src="./js/jquery.min.js"></script>
  <script src="./js/main.js" async></script>
</body>
</html>
